"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class StructError extends TypeError{constructor(t,r){let n;const{message:i,...o}=t,{path:s}=t,f=s.length===0?i:"At path: "+s.join(".")+" -- "+i;super(f),this.value=void 0,this.key=void 0,this.type=void 0,this.refinement=void 0,this.path=void 0,this.branch=void 0,this.failures=void 0,Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>{var c;return(c=n)!=null?c:n=[t,...r()]}}}function isIterable(e){return isObject(e)&&typeof e[Symbol.iterator]=="function"}function isObject(e){return typeof e=="object"&&e!=null}function isPlainObject(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function print(e){return typeof e=="string"?JSON.stringify(e):""+e}function shiftIterator(e){const{done:t,value:r}=e.next();return t?void 0:r}function toFailure(e,t,r,n){if(e===!0)return;e===!1?e={}:typeof e=="string"&&(e={message:e});const{path:i,branch:o}=t,{type:s}=r,{refinement:f,message:c="Expected a value of type `"+s+"`"+(f?" with refinement `"+f+"`":"")+", but received: `"+print(n)+"`"}=e;return{value:n,type:s,refinement:f,key:i[i.length-1],path:i,branch:o,...e,message:c}}function*toFailures(e,t,r,n){isIterable(e)||(e=[e]);for(const i of e){const o=toFailure(i,t,r,n);o&&(yield o)}}function*run(e,t,r){r===void 0&&(r={});const{path:n=[],branch:i=[e],coerce:o=!1,mask:s=!1}=r,f={path:n,branch:i};if(o&&(e=t.coercer(e,f),s&&t.type!=="type"&&isObject(t.schema)&&isObject(e)&&!Array.isArray(e)))for(const u in e)t.schema[u]===void 0&&delete e[u];let c=!0;for(const u of t.validator(e,f))c=!1,yield[u,void 0];for(let[u,d,p]of t.entries(e,f)){const y=run(d,p,{path:u===void 0?n:[...n,u],branch:u===void 0?i:[...i,d],coerce:o,mask:s});for(const a of y)a[0]?(c=!1,yield[a[0],void 0]):o&&(d=a[1],u===void 0?e=d:e instanceof Map?e.set(u,d):e instanceof Set?e.add(d):isObject(e)&&(e[u]=d))}if(c)for(const u of t.refiner(e,f))c=!1,yield[u,void 0];c&&(yield[void 0,e])}class Struct{constructor(t){this.TYPE=void 0,this.type=void 0,this.schema=void 0,this.coercer=void 0,this.validator=void 0,this.refiner=void 0,this.entries=void 0;const{type:r,schema:n,validator:i,refiner:o,coercer:s=c=>c,entries:f=function*(){}}=t;this.type=r,this.schema=n,this.entries=f,this.coercer=s,i?this.validator=(c,u)=>{const d=i(c,u);return toFailures(d,u,this,c)}:this.validator=()=>[],o?this.refiner=(c,u)=>{const d=o(c,u);return toFailures(d,u,this,c)}:this.refiner=()=>[]}assert(t){return assert(t,this)}create(t){return create(t,this)}is(t){return is(t,this)}mask(t){return mask(t,this)}validate(t,r){return r===void 0&&(r={}),validate(t,this,r)}}function assert(e,t){const r=validate(e,t);if(r[0])throw r[0]}function create(e,t){const r=validate(e,t,{coerce:!0});if(r[0])throw r[0];return r[1]}function mask(e,t){const r=validate(e,t,{coerce:!0,mask:!0});if(r[0])throw r[0];return r[1]}function is(e,t){return!validate(e,t)[0]}function validate(e,t,r){r===void 0&&(r={});const n=run(e,t,r),i=shiftIterator(n);return i[0]?[new StructError(i[0],function*(){for(const s of n)s[0]&&(yield s[0])}),void 0]:[void 0,i[1]]}function assign(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const n=t[0].type==="type",i=t.map(s=>s.schema),o=Object.assign({},...i);return n?type(o):object(o)}function define(e,t){return new Struct({type:e,schema:null,validator:t})}function deprecated(e,t){return new Struct({...e,refiner:(r,n)=>r===void 0||e.refiner(r,n),validator(r,n){return r===void 0?!0:(t(r,n),e.validator(r,n))}})}function dynamic(e){return new Struct({type:"dynamic",schema:null,*entries(t,r){yield*e(t,r).entries(t,r)},validator(t,r){return e(t,r).validator(t,r)},coercer(t,r){return e(t,r).coercer(t,r)},refiner(t,r){return e(t,r).refiner(t,r)}})}function lazy(e){let t;return new Struct({type:"lazy",schema:null,*entries(r,n){var i;(i=t)!=null||(t=e()),yield*t.entries(r,n)},validator(r,n){var i;return(i=t)!=null||(t=e()),t.validator(r,n)},coercer(r,n){var i;return(i=t)!=null||(t=e()),t.coercer(r,n)},refiner(r,n){var i;return(i=t)!=null||(t=e()),t.refiner(r,n)}})}function omit(e,t){const{schema:r}=e,n={...r};for(const i of t)delete n[i];switch(e.type){case"type":return type(n);default:return object(n)}}function partial(e){const t=e instanceof Struct?{...e.schema}:{...e};for(const r in t)t[r]=optional(t[r]);return object(t)}function pick(e,t){const{schema:r}=e,n={};for(const i of t)n[i]=r[i];return object(n)}function struct(e,t){return console.warn("superstruct@0.11 - The `struct` helper has been renamed to `define`."),define(e,t)}function any(){return define("any",()=>!0)}function array(e){return new Struct({type:"array",schema:e,*entries(t){if(e&&Array.isArray(t))for(const[r,n]of t.entries())yield[r,n,e]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||"Expected an array value, but received: "+print(t)}})}function bigint(){return define("bigint",e=>typeof e=="bigint")}function boolean(){return define("boolean",e=>typeof e=="boolean")}function date(){return define("date",e=>e instanceof Date&&!isNaN(e.getTime())||"Expected a valid `Date` object, but received: "+print(e))}function enums(e){const t={},r=e.map(n=>print(n)).join();for(const n of e)t[n]=n;return new Struct({type:"enums",schema:t,validator(n){return e.includes(n)||"Expected one of `"+r+"`, but received: "+print(n)}})}function func(){return define("func",e=>typeof e=="function"||"Expected a function, but received: "+print(e))}function instance(e){return define("instance",t=>t instanceof e||"Expected a `"+e.name+"` instance, but received: "+print(t))}function integer(){return define("integer",e=>typeof e=="number"&&!isNaN(e)&&Number.isInteger(e)||"Expected an integer, but received: "+print(e))}function intersection(e){return new Struct({type:"intersection",schema:null,*entries(t,r){for(const n of e)yield*n.entries(t,r)},*validator(t,r){for(const n of e)yield*n.validator(t,r)},*refiner(t,r){for(const n of e)yield*n.refiner(t,r)}})}function literal(e){const t=print(e),r=typeof e;return new Struct({type:"literal",schema:r==="string"||r==="number"||r==="boolean"?e:null,validator(n){return n===e||"Expected the literal `"+t+"`, but received: "+print(n)}})}function map(e,t){return new Struct({type:"map",schema:null,*entries(r){if(e&&t&&r instanceof Map)for(const[n,i]of r.entries())yield[n,n,e],yield[n,i,t]},coercer(r){return r instanceof Map?new Map(r):r},validator(r){return r instanceof Map||"Expected a `Map` object, but received: "+print(r)}})}function never(){return define("never",()=>!1)}function nullable(e){return new Struct({...e,validator:(t,r)=>t===null||e.validator(t,r),refiner:(t,r)=>t===null||e.refiner(t,r)})}function number(){return define("number",e=>typeof e=="number"&&!isNaN(e)||"Expected a number, but received: "+print(e))}function object(e){const t=e?Object.keys(e):[],r=never();return new Struct({type:"object",schema:e||null,*entries(n){if(e&&isObject(n)){const i=new Set(Object.keys(n));for(const o of t)i.delete(o),yield[o,n[o],e[o]];for(const o of i)yield[o,n[o],r]}},validator(n){return isObject(n)||"Expected an object, but received: "+print(n)},coercer(n){return isObject(n)?{...n}:n}})}function optional(e){return new Struct({...e,validator:(t,r)=>t===void 0||e.validator(t,r),refiner:(t,r)=>t===void 0||e.refiner(t,r)})}function record(e,t){return new Struct({type:"record",schema:null,*entries(r){if(isObject(r))for(const n in r){const i=r[n];yield[n,n,e],yield[n,i,t]}},validator(r){return isObject(r)||"Expected an object, but received: "+print(r)}})}function regexp(){return define("regexp",e=>e instanceof RegExp)}function set(e){return new Struct({type:"set",schema:null,*entries(t){if(e&&t instanceof Set)for(const r of t)yield[r,r,e]},coercer(t){return t instanceof Set?new Set(t):t},validator(t){return t instanceof Set||"Expected a `Set` object, but received: "+print(t)}})}function string(){return define("string",e=>typeof e=="string"||"Expected a string, but received: "+print(e))}function tuple(e){const t=never();return new Struct({type:"tuple",schema:null,*entries(r){if(Array.isArray(r)){const n=Math.max(e.length,r.length);for(let i=0;i<n;i++)yield[i,r[i],e[i]||t]}},validator(r){return Array.isArray(r)||"Expected an array, but received: "+print(r)}})}function type(e){const t=Object.keys(e);return new Struct({type:"type",schema:e,*entries(r){if(isObject(r))for(const n of t)yield[n,r[n],e[n]]},validator(r){return isObject(r)||"Expected an object, but received: "+print(r)}})}function union(e){const t=e.map(r=>r.type).join(" | ");return new Struct({type:"union",schema:null,coercer(r,n){return(e.find(o=>{const[s]=o.validate(r,{coerce:!0});return!s})||unknown()).coercer(r,n)},validator(r,n){const i=[];for(const o of e){const[...s]=run(r,o,n),[f]=s;if(f[0])for(const[c]of s)c&&i.push(c);else return[]}return["Expected the value to satisfy a union of `"+t+"`, but received: "+print(r),...i]}})}function unknown(){return define("unknown",()=>!0)}function coerce(e,t,r){return new Struct({...e,coercer:(n,i)=>is(n,t)?e.coercer(r(n,i),i):e.coercer(n,i)})}function defaulted(e,t,r){return r===void 0&&(r={}),coerce(e,unknown(),n=>{const i=typeof t=="function"?t():t;if(n===void 0)return i;if(!r.strict&&isPlainObject(n)&&isPlainObject(i)){const o={...n};let s=!1;for(const f in i)o[f]===void 0&&(o[f]=i[f],s=!0);if(s)return o}return n})}function trimmed(e){return coerce(e,string(),t=>t.trim())}function empty(e){return refine(e,"empty",t=>{const r=getSize(t);return r===0||"Expected an empty "+e.type+" but received one with a size of `"+r+"`"})}function getSize(e){return e instanceof Map||e instanceof Set?e.size:e.length}function max(e,t,r){r===void 0&&(r={});const{exclusive:n}=r;return refine(e,"max",i=>n?i<t:i<=t||"Expected a "+e.type+" less than "+(n?"":"or equal to ")+t+" but received `"+i+"`")}function min(e,t,r){r===void 0&&(r={});const{exclusive:n}=r;return refine(e,"min",i=>n?i>t:i>=t||"Expected a "+e.type+" greater than "+(n?"":"or equal to ")+t+" but received `"+i+"`")}function nonempty(e){return refine(e,"nonempty",t=>getSize(t)>0||"Expected a nonempty "+e.type+" but received an empty one")}function pattern(e,t){return refine(e,"pattern",r=>t.test(r)||"Expected a "+e.type+" matching `/"+t.source+'/` but received "'+r+'"')}function size(e,t,r){r===void 0&&(r=t);const n="Expected a "+e.type,i=t===r?"of `"+t+"`":"between `"+t+"` and `"+r+"`";return refine(e,"size",o=>{if(typeof o=="number"||o instanceof Date)return t<=o&&o<=r||n+" "+i+" but received `"+o+"`";if(o instanceof Map||o instanceof Set){const{size:s}=o;return t<=s&&s<=r||n+" with a size "+i+" but received one with a size of `"+s+"`"}else{const{length:s}=o;return t<=s&&s<=r||n+" with a length "+i+" but received one with a length of `"+s+"`"}})}function refine(e,t,r){return new Struct({...e,*refiner(n,i){yield*e.refiner(n,i);const o=r(n,i),s=toFailures(o,i,e,n);for(const f of s)yield{...f,refinement:t}}})}exports.Struct=Struct,exports.StructError=StructError,exports.any=any,exports.array=array,exports.assert=assert,exports.assign=assign,exports.bigint=bigint,exports.boolean=boolean,exports.coerce=coerce,exports.create=create,exports.date=date,exports.defaulted=defaulted,exports.define=define,exports.deprecated=deprecated,exports.dynamic=dynamic,exports.empty=empty,exports.enums=enums,exports.func=func,exports.instance=instance,exports.integer=integer,exports.intersection=intersection,exports.is=is,exports.lazy=lazy,exports.literal=literal,exports.map=map,exports.mask=mask,exports.max=max,exports.min=min,exports.never=never,exports.nonempty=nonempty,exports.nullable=nullable,exports.number=number,exports.object=object,exports.omit=omit,exports.optional=optional,exports.partial=partial,exports.pattern=pattern,exports.pick=pick,exports.record=record,exports.refine=refine,exports.regexp=regexp,exports.set=set,exports.size=size,exports.string=string,exports.struct=struct,exports.trimmed=trimmed,exports.tuple=tuple,exports.type=type,exports.union=union,exports.unknown=unknown,exports.validate=validate;

//# sourceMappingURL=index.1a81acf4382d9c28d39a.cjs.map